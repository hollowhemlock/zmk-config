#!/usr/bin/env bash
# Auto-format keymap before commit

# Get staged keymap files
staged=$(git diff --cached --name-only | grep '\.keymap$' || true)

if [[ -n "$staged" ]]; then
    just fmt
    # Re-stage only the originally staged files
    echo "$staged" | xargs -r git add
fi
